import { useState } from "react";
import { FaUniversity, FaShieldAlt, FaArrowLeft, FaCalendarAlt, FaMapMarkerAlt, FaUsers } from "react-icons/fa";

const islamicWars = [
  {
    id: 1,
    name: "Battle of Badr",
    date: "17 Ramadan 2 AH (624 CE)",
    location: "Badr, Saudi Arabia",
    participants: "Muslims vs Meccan Quraysh",
    result: "Decisive Muslim Victory",
    significance: "First major victory of Muslims",
    shortDesc: "The first major battle between Muslims and Meccan forces, marking a turning point in Islamic history.",
    fullHistory: `The Battle of Badr was the first major battle fought by the Prophet Muhammad (peace be upon him) and his followers against the Meccan Quraysh tribe on 17 Ramadan, 2 AH (March 13, 624 CE).

Background:
The Muslims had migrated to Medina and were facing economic hardship. A Meccan caravan led by Abu Sufyan was returning from Syria with valuable goods. The Prophet (peace be upon him) decided to intercept it as the Quraysh had confiscated Muslim property when they migrated.

The Battle:
- Muslim forces: 313 men (including 77 Muhajirun and 236 Ansar)
- Meccan forces: approximately 1,000 well-equipped warriors
- Despite being outnumbered 3:1, Muslims achieved victory through Allah's assistance and strategic planning

Key Events:
1. The battle began with single combat between champions from both sides
2. Allah sent angels to assist the Muslims as mentioned in the Quran
3. The Prophet (peace be upon him) threw a handful of dust that confused the enemy
4. 70 Meccans were killed, 70 captured, only 14 Muslims were martyred

Significance:
- Established Muslim military reputation in Arabia
- Boosted Muslim morale and strengthened their faith
- Many prominent Meccan leaders were killed
- Marked the beginning of Islamic expansion beyond Medina
- Demonstrated that Allah supports the believers who strive in His path

Lessons from Hanafi Perspective:
- Complete trust in Allah (Tawakkul) brings victory against overwhelming odds
- Unity among believers and following leadership is essential
- Divine assistance comes to those who strive sincerely for Allah's cause
- Material disadvantages can be overcome through faith and proper strategy

This victory was so significant that Allah mentioned it in the Quran: "And Allah had already given you victory at Badr while you were few in number." (Quran 3:123)`
  },
  {
    id: 2,
    name: "Battle of Uhud",
    date: "7 Shawwal 3 AH (625 CE)",
    location: "Mount Uhud, Medina",
    participants: "Muslims vs Meccan Coalition",
    result: "Tactical Meccan Victory",
    significance: "Test of faith and lesson in obedience",
    shortDesc: "A challenging battle that tested Muslim resolve and taught important lessons about following orders.",
    fullHistory: `The Battle of Uhud was fought on 7 Shawwal, 3 AH (March 23, 625 CE) between Muslims and a Meccan coalition seeking revenge for their defeat at Badr.

Background:
- Meccans wanted revenge for their defeat at Badr
- Led by Abu Sufyan with 3,000 warriors including cavalry
- Muslims had 700 fighters, later reduced to 650 when Abdullah ibn Ubayy withdrew with 300 men
- The Prophet (peace be upon him) initially preferred to defend from within Medina but was persuaded by the companions to fight outside

The Battle:
Initial Success:
- Muslims were winning initially due to their superior fighting spirit
- Meccan cavalry was being pushed back effectively
- Muslim archers positioned on Mount Uhud were successfully protecting the rear

The Turning Point:
- 40 of 50 archers left their positions to collect war booty, disobeying the Prophet's clear orders
- Khalid ibn Walid (then fighting for Mecca) flanked the Muslim army through the unguarded pass
- Muslims were caught between two forces and faced severe difficulties

Casualties:
- 70 Muslims were martyred including Hamza (may Allah be pleased with him), the Prophet's uncle
- The Prophet (peace be upon him) was injured but survived by Allah's protection
- Meccans lost approximately 20-30 men

Key Lessons According to Hanafi Understanding:
1. Absolute obedience to rightful leadership is mandatory
2. Worldly temptations can lead to spiritual and material failure
3. Allah tests believers through both ease and hardship
4. Patience and perseverance in face of trials are essential qualities
5. Victory and defeat are both from Allah and serve as lessons

Quranic References:
- Surah Al-Imran (3:121-180) extensively covers this battle and its lessons
- "And Allah certainly fulfilled His promise to you when you were killing them by His permission until when you lost courage and disputed about the order..." (3:152)

Aftermath:
- Muslims learned valuable military and spiritual lessons
- The community's resolve was strengthened for future challenges
- It demonstrated that success depends on following divine guidance through the Prophet
- Prepared the Muslim community for greater trials ahead

This battle taught that success depends entirely on following Allah's guidance through His Messenger, not merely on courage or numbers.`
  },
  {
    id: 3,
    name: "Battle of the Trench",
    date: "5 AH (627 CE)",
    location: "Medina",
    participants: "Muslims vs Confederate Alliance",
    result: "Decisive Muslim Victory",
    significance: "Defense of Medina and breaking of tribal alliances",
    shortDesc: "The siege of Medina where Muslims dug a trench to defend the city against a massive coalition.",
    fullHistory: `The Battle of the Trench (Ghazwat al-Khandaq) occurred in 5 AH (627 CE) when a massive coalition besieged Medina for nearly a month.

Background:
- The exiled Jewish tribe Banu Nadir incited various Arab tribes against Muslims
- They formed a confederation of approximately 10,000 warriors
- This was the largest force ever assembled against the Muslim community
- The coalition included Quraysh, Ghatafan, and several other tribes under Abu Sufyan's leadership

The Strategy:
Salman al-Farisi's Suggestion:
- Salman al-Farisi (may Allah be pleased with him) suggested digging a trench, a Persian military tactic
- This strategy was unprecedented in Arabian warfare
- All Muslims participated in the digging, including the Prophet (peace be upon him) himself
- The work demonstrated the Islamic principle of equality and collective responsibility

The Siege:
- The coalition arrived expecting easy victory but found an impassable trench
- The siege lasted approximately 20-30 days during harsh winter conditions
- Only minor skirmishes occurred as the trench prevented major confrontation
- Coalition forces became demoralized as supplies ran low and unity weakened

Divine Intervention:
- Allah sent fierce winds and bitter cold against the enemy
- Angels struck fear into the hearts of the coalition forces
- Internal disputes arose among the different tribal groups
- The potential betrayal by Banu Qurayza was discovered and neutralized

Key Events:
1. Amr ibn Abd Wudd's Challenge: The famous Meccan warrior crossed the trench but was defeated by Ali (may Allah be pleased with him)
2. Banu Qurayza Incident: The Jewish tribe nearly betrayed Muslims from within the city
3. Nu'aym ibn Mas'ud's Strategy: This newly converted Muslim sowed discord among enemy ranks
4. The Divine Storm: Allah sent winds that scattered the enemy camps and equipment

Result:
- The coalition retreated without achieving any of their objectives
- Minimal Muslim casualties despite the overwhelming enemy numbers
- This marked the end of major Meccan-led threats against Medina
- Established Muslim dominance in the Arabian Peninsula

Significance According to Hanafi Fiqh:
- Strategic innovation and adaptation are permissible when facing challenges
- Collective effort and unity among believers bring divine assistance
- Consultation (Shura) in military and community matters is essential
- Allah's help comes in ways that human minds cannot always anticipate
- Patience and perseverance in face of overwhelming odds are rewarded

Quranic Reference:
"O you who believe! Remember the favor of Allah upon you when armies came to attack you and We sent upon them a wind and armies of angels you did not see." (Quran 33:9)

Lessons:
- Innovation within Islamic principles is encouraged when facing new challenges
- Unity and collective effort under righteous leadership bring success
- Divine assistance manifests in both natural and supernatural ways
- Patience and trust in Allah overcome seemingly impossible situations

This victory marked the beginning of Muslim expansion beyond purely defensive warfare and demonstrated Allah's protection of the believing community.`
  },
  {
    id: 4,
    name: "Conquest of Mecca",
    date: "20 Ramadan 8 AH (630 CE)",
    location: "Mecca, Saudi Arabia",
    participants: "Muslims vs Meccan Quraysh",
    result: "Peaceful Muslim Victory",
    significance: "Bloodless conquest and mass conversion",
    shortDesc: "The peaceful conquest of Mecca that marked the triumph of Islam in the Arabian Peninsula.",
    fullHistory: `The Conquest of Mecca (Fath Makkah) on 20 Ramadan 8 AH (January 11, 630 CE) was one of the most significant events in Islamic history.

Background:
Treaty of Hudaybiyyah Violation:
- The allied tribe Banu Bakr (allied with Mecca) attacked Banu Khuza'a (allied with Muslims)
- This attack violated the Treaty of Hudaybiyyah signed in 6 AH
- Quraysh supported Banu Bakr with weapons and fighters
- The Prophet (peace be upon him) gave Quraysh three options: pay blood money for the victims, abandon their alliance with Banu Bakr, or consider the treaty void

Preparation:
- Muslims assembled an army of 10,000 fighters
- Complete secrecy was maintained about the destination until the last moment
- Various tribes joined the Muslim force during the march
- This was the largest Muslim army assembled to that date

The March:
- The army departed from Medina during the month of Ramadan 8 AH
- Secrecy was maintained until reaching Marr az-Zahran near Mecca
- Abu Sufyan came to negotiate and accepted Islam before the conquest
- The Prophet (peace be upon him) granted general amnesty to encourage peaceful surrender

The Conquest:
Four-Pronged Attack Strategy:
1. Khalid ibn Walid: Approached from the south (faced minor resistance)
2. Zubayr ibn Awwam: Entered from the west
3. Abu Ubaydah ibn al-Jarrah: Advanced from the north
4. The Prophet (peace be upon him) with the main force: Entered from the northwest

Peaceful Entry:
- Most of Mecca surrendered without any fighting
- Only minor skirmishes occurred at the southern entrance
- Casualties were minimal: 2 Muslims and approximately 12-28 Meccans
- The conquest was achieved with remarkable restraint and mercy

Key Events:
At the Sacred Ka'bah:
- The Prophet (peace be upon him) performed Tawaf around the Ka'bah
- All 360 idols around the Ka'bah were destroyed
- He recited: "Truth has come and falsehood has vanished. Indeed falsehood is bound to vanish." (Quran 17:81)
- The sacred house was purified and restored to monotheistic worship

General Amnesty:
- The Prophet declared: "Go, you are free" (Itlaqū antum at-tulaqā')
- He forgave all past enemies and their previous hostilities
- Only 4 individuals were initially excluded from amnesty (most were later pardoned)
- This led to mass conversion of the Meccan population

Significance According to Hanafi Understanding:
Religious Significance:
- The Ka'bah was restored to pure monotheistic worship as intended by Ibrahim (peace be upon him)
- The end of idol worship in the sacred city
- Fulfillment of the Prophet's vision of performing Hajj

Political Significance:
- Established Muslim control over the Arabian Peninsula
- Demonstrated Islamic principles of mercy and forgiveness in victory
- Unified Arabia under Islamic leadership and law
- Set a precedent for future Islamic conquests

Social Significance:
- Mass conversion occurred without any coercion
- Former enemies were integrated as brothers in faith
- Established a model of conquest with minimal bloodshed
- Demonstrated the transformative power of Islamic mercy

Strategic Significance:
- Secured the holiest city in Islam
- Eliminated the main source of organized opposition
- Opened the path for Islamic expansion beyond Arabia
- Established Mecca as the spiritual center of the Muslim world

Lessons from Hanafi Perspective:
1. Mercy and forgiveness in victory reflect true Islamic character
2. Strategic planning combined with trust in Allah brings success
3. Fulfillment of divine promises comes at the appointed time
4. Former enemies can become the strongest supporters when treated with justice
5. The ultimate goal is guidance of humanity, not mere conquest

Quranic Reference:
"When the victory of Allah has come and the conquest, and you see the people entering into the religion of Allah in multitudes, then exalt Allah with praise of your Lord and ask forgiveness of Him. Indeed, He is ever Accepting of repentance." (Quran 110:1-3)

This conquest marked the effective end of organized opposition to Islam in Arabia and established the foundation for the rapid expansion of Islam beyond the Arabian Peninsula.`
  },
  {
    id: 5,
    name: "Battle of Hunayn",
    date: "10 Shawwal 8 AH (630 CE)",
    location: "Hunayn Valley, Saudi Arabia",
    participants: "Muslims vs Hawazin & Thaqif",
    result: "Muslim Victory",
    significance: "Test after Mecca conquest and lesson in humility",
    shortDesc: "A battle that tested Muslim unity after the conquest of Mecca and taught lessons about relying on Allah.",
    fullHistory: `The Battle of Hunayn occurred in 10 Shawwal 8 AH (January 630 CE), shortly after the Conquest of Mecca, against the Hawazin and Thaqif tribal confederation.

Background:
Tribal Fear and Preparation:
- The Hawazin and Thaqif tribes feared the growing Muslim power after Mecca's conquest
- They were led by Malik ibn Awf an-Nasri of the Hawazin tribe
- The tribes assembled a large confederation and brought their families, indicating their determination to fight desperately
- They planned to use the narrow valley terrain to their advantage against the larger Muslim force

Muslim Preparation:
- The Muslim army consisted of 12,000 fighters, the largest force assembled yet
- This included 2,000 new converts from the recent conquest of Mecca
- Some Muslims expressed confidence due to their large numbers
- The Prophet (peace be upon him) was concerned about this overconfidence

The Battle:
Initial Setback:
- The enemy used effective guerrilla tactics in the narrow Hunayn valley
- A sudden ambush from the surrounding hills caught the Muslim army off-guard
- Many of the new Meccan converts fled in panic during the initial confusion
- The Muslim army scattered initially, creating a dangerous situation

The Prophet's Steadfastness:
- The Prophet (peace be upon him) remained firm with a small group of loyal companions
- He called out clearly: "I am the Prophet, this is no lie! I am the son of Abdul Muttalib!"
- Abbas (may Allah be pleased with him) used his powerful voice to call the fleeing Muslims back
- Gradually, the Muslims regrouped around the Prophet and renewed their resolve

Divine Intervention and Victory:
- Allah sent down tranquility (Sakinah) upon the believers
- Invisible angels assisted the Muslim forces as mentioned in the Quran
- The enemy forces were completely routed once the Muslims regrouped
- Massive war booty was captured including livestock and captives

Aftermath and Distribution:
Spoils of War:
- Enormous booty was captured including 6,000 captives
- 24,000 camels and 40,000 sheep were among the spoils
- The Prophet (peace be upon him) distributed the wealth generously
- He gave larger shares to new converts to strengthen their attachment to Islam

Siege of Ta'if:
- The Thaqif tribe retreated to their fortified city of Ta'if
- Muslims besieged the city for approximately 20 days
- The siege was lifted without conquest as the fortifications were too strong
- Ta'if later surrendered peacefully and accepted Islam

Key Lessons According to Hanafi Understanding:
Spiritual Lessons:
1. Large numbers and material strength do not guarantee victory
2. Success comes only from Allah, not from human capabilities
3. Overconfidence can lead to initial failure and humiliation
4. Steadfast leadership during crisis is essential for community survival
5. True faith is tested during moments of apparent strength

Military and Strategic Lessons:
1. New converts need time and proper training to develop strong faith
2. Experienced Muslim core is essential for stability during trials
3. Unity under righteous leadership overcomes temporary setbacks
4. Proper distribution of resources helps integrate diverse groups

Quranic Reference:
"Allah has already given you victory in many regions and even on the day of Hunayn, when your great number pleased you, but it did not avail you at all, and the earth was confining for you with its vastness; then you turned back, fleeing. Then Allah sent down His tranquility upon His Messenger and upon the believers and sent down soldiers angels whom you did not see." (Quran 9:25-26)

Distribution Wisdom:
- New converts received larger shares to win their hearts
- Some Ansar initially felt neglected but understood the wisdom when explained
- The Prophet demonstrated political wisdom in managing diverse groups
- This established principles for integrating new Muslims into the community

Long-term Impact:
- Consolidated Muslim control over central and eastern Arabia
- Successfully integrated more tribal groups into the Muslim community
- Prepared the foundation for expansion beyond the Arabian Peninsula
- Established important principles for dealing with new converts and diverse populations

This battle served as a crucial reminder that victory comes from Allah alone, not from numbers or material strength. It highlighted the importance of maintaining humility, complete dependence on divine guidance, and proper leadership even during times of apparent strength and success.`
  }
];

export default function IslamicHistory() {
  const [selectedWar, setSelectedWar] = useState(null);

  const handleWarClick = (war) => {
    setSelectedWar(war);
  };

  const handleBackClick = () => {
    setSelectedWar(null);
  };

  if (selectedWar) {
    return (
      <div className="p-4 sm:p-6 max-w-4xl mx-auto">
        {/* Back Button */}
        <button
          onClick={handleBackClick}
          className="flex items-center gap-2 text-green-600 hover:text-green-700 mb-6 transition-colors"
        >
          <FaArrowLeft size={16} />
          <span>Back to History</span>
        </button>

        {/* War Details */}
        <div className="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200 shadow-lg">
          {/* Header */}
          <div className="mb-6">
            <h1 className="text-3xl font-bold text-green-800 mb-4 flex items-center gap-3">
              <FaShieldAlt className="text-green-600" />
              {selectedWar.name}
            </h1>
            
            {/* War Info Grid */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
              <div className="flex items-center gap-2 text-green-700">
                <FaCalendarAlt size={16} />
                <span className="font-medium">Date:</span>
                <span>{selectedWar.date}</span>
              </div>
              <div className="flex items-center gap-2 text-green-700">
                <FaMapMarkerAlt size={16} />
                <span className="font-medium">Location:</span>
                <span>{selectedWar.location}</span>
              </div>
              <div className="flex items-center gap-2 text-green-700">
                <FaUsers size={16} />
                <span className="font-medium">Participants:</span>
                <span>{selectedWar.participants}</span>
              </div>
              <div className="flex items-center gap-2 text-green-700">
                <span className="font-medium">Result:</span>
                <span className={`px-2 py-1 rounded-full text-xs font-medium ${
                  selectedWar.result.includes('Muslim Victory') 
                    ? 'bg-green-100 text-green-800' 
                    : selectedWar.result.includes('Tactical') 
                    ? 'bg-yellow-100 text-yellow-800'
                    : 'bg-blue-100 text-blue-800'
                }`}>
                  {selectedWar.result}
                </span>
              </div>
            </div>
          </div>

          {/* Full History */}
          <div className="prose prose-green max-w-none">
            <div className="bg-white rounded-lg p-6 border border-green-100">
              <div className="whitespace-pre-line text-green-800 leading-relaxed">
                {selectedWar.fullHistory}
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="p-4 sm:p-6">
      {/* Header */}
      <div className="mb-8 text-center">
        <h2 className="text-2xl sm:text-3xl font-bold text-green-800 mb-4 flex items-center justify-center gap-3">
          <FaUniversity className="text-green-600" />
          Islamic History
        </h2>
        <p className="text-green-600 max-w-2xl mx-auto">
          Explore the pivotal battles and events that shaped Islamic history. Learn from the courage, 
          strategy, and faith of our predecessors.
        </p>
      </div>

      {/* Wars Grid */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {islamicWars.map((war) => (
          <div
            key={war.id}
            onClick={() => handleWarClick(war)}
            className="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer transform hover:scale-105"
          >
            {/* War Icon */}
            <div className="flex items-center justify-center w-12 h-12 bg-green-600 rounded-full mb-4 mx-auto">
              <FaShieldAlt className="text-white" size={20} />
            </div>

            {/* War Name */}
            <h3 className="text-xl font-bold text-green-800 text-center mb-3">
              {war.name}
            </h3>

            {/* Date */}
            <div className="flex items-center justify-center gap-2 text-green-600 mb-3">
              <FaCalendarAlt size={14} />
              <span className="text-sm">{war.date}</span>
            </div>

            {/* Short Description */}
            <p className="text-green-700 text-sm text-center mb-4 leading-relaxed">
              {war.shortDesc}
            </p>

            {/* Result Badge */}
            <div className="text-center">
              <span className={`inline-block px-3 py-1 rounded-full text-xs font-medium ${
                war.result.includes('Muslim Victory') 
                  ? 'bg-green-100 text-green-800' 
                  : war.result.includes('Tactical') 
                  ? 'bg-yellow-100 text-yellow-800'
                  : 'bg-blue-100 text-blue-800'
              }`}>
                {war.result}
              </span>
            </div>

            {/* Click indicator */}
            <div className="text-center mt-4">
              <span className="text-green-500 text-xs">Click to read full history</span>
            </div>
          </div>
        ))}
      </div>

      {/* Quote Section */}
      <div className="mt-12 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl p-6 border border-green-200 text-center">
        <p className="text-green-800 italic text-lg mb-2">
          "And Allah will surely support those who support Him. Indeed, Allah is Powerful and Exalted in Might."
        </p>
        <p className="text-green-600 text-sm">
          Quran 22:40
        </p>
      </div>
    </div>
  );
}





